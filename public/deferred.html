<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>deferred</title>
	<link rel="stylesheet" href="./libs/bootstrap/dist/css/bootstrap.min.css">
	<script src="./libs/jquery/dist/jquery.min.js"></script>
	<script src="./libs/bootstrap/dist/js/bootstrap.min.js"></script>
</head>
<body>
	<script>
		$(function () {
			// 此时的缺点是deferred对象是一个全局对象，可以从外面改变deferred对象的状态
			var dtd = $.Deferred();
			var wait = function (dtd) {
				var tasks = function () {
					console.log('is over!!!');
					// 当调用resolve方法时，表示处于完成状态
					dtd.resolve(); // 改变deferred对象的执行状态
					// 当调用reject方法时，表示处于失败状态
					// dtd.reject()
				};
				setTimeout(tasks, 5000);
				return dtd;
			};
			$.when(wait(dtd)).done(function () {
				console.log('success');
			}).fail(function () {
				console.log('fail');
			});

			dtd.reject();

			// 为了避免这种情况，jquery提供了deferred.promise()方法

		});	
	</script>
</body>
</html>